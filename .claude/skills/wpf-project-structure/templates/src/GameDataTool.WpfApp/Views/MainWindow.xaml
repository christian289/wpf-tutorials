<Window x:Class="GameDataTool.WpfApp.Views.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:viewmodels="clr-namespace:GameDataTool.ViewModels;assembly=GameDataTool.ViewModels"
        mc:Ignorable="d"
        d:DataContext="{d:DesignInstance Type=viewmodels:MainViewModel}"
        Title="Game Data Tool - Clean Architecture Sample"
        Width="800" Height="600"
        WindowStartupLocation="CenterScreen">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!-- 사용자 추가 영역 -->
        <!-- Add User Section -->
        <GroupBox Grid.Row="0" Header="새 사용자 추가" Margin="0,0,0,10">
            <Grid Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <TextBlock Grid.Column="0" Text="이름:" VerticalAlignment="Center" Margin="0,0,10,0" />
                <TextBox Grid.Column="1" Text="{Binding NewUserName, UpdateSourceTrigger=PropertyChanged}"
                         VerticalAlignment="Center" Margin="0,0,20,0" />

                <TextBlock Grid.Column="2" Text="이메일:" VerticalAlignment="Center" Margin="0,0,10,0" />
                <TextBox Grid.Column="3" Text="{Binding NewUserEmail, UpdateSourceTrigger=PropertyChanged}"
                         VerticalAlignment="Center" Margin="0,0,20,0" />

                <Button Grid.Column="4" Content="추가" Command="{Binding CreateUserCommand}"
                        Padding="20,5" />
            </Grid>
        </GroupBox>

        <!-- 사용자 목록 -->
        <!-- User List -->
        <GroupBox Grid.Row="1" Header="사용자 목록">
            <DataGrid ItemsSource="{Binding Users}"
                      SelectedItem="{Binding SelectedUser}"
                      AutoGenerateColumns="False"
                      IsReadOnly="True"
                      SelectionMode="Single"
                      Margin="10">
                <DataGrid.Columns>
                    <DataGridTextColumn Header="이름" Binding="{Binding Name}" Width="*" />
                    <DataGridTextColumn Header="이메일" Binding="{Binding Email}" Width="*" />
                    <DataGridTextColumn Header="생성일" Binding="{Binding CreatedAt, StringFormat=yyyy-MM-dd HH:mm}" Width="150" />
                    <DataGridTemplateColumn Header="작업" Width="80">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <Button Content="삭제"
                                        Command="{Binding DataContext.DeleteUserCommand, RelativeSource={RelativeSource AncestorType=DataGrid}}"
                                        CommandParameter="{Binding}"
                                        Padding="10,3" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>
                </DataGrid.Columns>
            </DataGrid>
        </GroupBox>

        <!-- 하단 버튼 영역 -->
        <!-- Bottom Button Section -->
        <StackPanel Grid.Row="2" Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,10,0,0">
            <Button Content="새로고침" Command="{Binding LoadUsersCommand}" Padding="20,5" />
        </StackPanel>

        <!-- 로딩 인디케이터 -->
        <!-- Loading Indicator -->
        <Border Grid.RowSpan="3"
                Background="#80000000"
                Visibility="{Binding IsLoading, Converter={StaticResource BoolToVisibility}}"
                d:Visibility="Collapsed">
            <TextBlock Text="로딩 중..."
                       Foreground="White"
                       FontSize="24"
                       HorizontalAlignment="Center"
                       VerticalAlignment="Center" />
        </Border>
    </Grid>

    <Window.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVisibility" />
    </Window.Resources>
</Window>
